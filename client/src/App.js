// –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ —Ö—É–∫–∏ –∏–∑ React
import React, { useState, useEffect } from 'react';
// –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º CSS-—Å—Ç–∏–ª–∏ –¥–ª—è —ç—Ç–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
import './App.css';

// –ì–ª–∞–≤–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è - MoodDiary
function MoodDiary() {
  // 1. –û–±—ä—è–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è.
  // useState('') –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø—É—Å—Ç–æ–π —Å—Ç—Ä–æ–∫–æ–π.
  // currentMood - —Ç–µ–∫—É—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è.
  // setCurrentMood - —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.
  const [currentMood, setCurrentMood] = useState('');

  // 2. –ú–∞—Å—Å–∏–≤ —Å –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ —ç–º–æ—Ü–∏—è–º–∏.
  // –ö–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç - –æ–±—ä–µ–∫—Ç —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º (name) –∏ emoji.
  const emotions = [
    { name: 'happy', emoji: 'üòä' },
    { name: 'sad', emoji: 'üò¢' },
    { name: 'angry', emoji: 'üò†' },
    { name: 'tired', emoji: 'üò¥' },
    { name: 'excited', emoji: 'ü§©' },
  ];

  // 3. useEffect - —ç—Ç–æ "—Ö—É–∫" –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤.
  // –≠—Ç–æ—Ç —ç—Ñ—Ñ–µ–∫—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –∑–∞–≥—Ä—É–∑–∫–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ ([] - –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π).
  // –ú—ã –ø—ã—Ç–∞–µ–º—Å—è –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏–∑ localStorage.
  useEffect(() => {
    const savedMood = localStorage.getItem('currentMood');
    if (savedMood) {
      setCurrentMood(savedMood);
    }
  }, []); // –ü—É—Å—Ç—ã–µ —Å–∫–æ–±–∫–∏ –æ–∑–Ω–∞—á–∞—é—Ç, —á—Ç–æ —ç—Ñ—Ñ–µ–∫—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏

  // 4. –§—É–Ω–∫—Ü–∏—è-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è –≤—ã–±–æ—Ä–∞ —ç–º–æ—Ü–∏–∏.
  // –û–Ω–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∫–Ω–æ–ø–∫—É —Å —ç–º–æ—Ü–∏–µ–π.
  const handleMoodClick = (moodName) => {
    // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è
    setCurrentMood(moodName);
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤—ã–±—Ä–∞–Ω–Ω–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –≤ localStorage –±—Ä–∞—É–∑–µ—Ä–∞
    // –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –Ω–µ —Ç–µ—Ä—è—Ç—å –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    localStorage.setItem('currentMood', moodName);
  };

  // 5. –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–±—Ä–æ—Å–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è.
  const handleResetClick = () => {
    setCurrentMood(''); // –û—á–∏—â–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
    localStorage.removeItem('currentMood'); // –£–¥–∞–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
  };

  // 6. –ù–∞—Ö–æ–¥–∏–º emoji –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è.
  // –ò—â–µ–º –≤ –º–∞—Å—Å–∏–≤–µ emotions –æ–±—ä–µ–∫—Ç, —É –∫–æ—Ç–æ—Ä–æ–≥–æ name —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å currentMood.
  const currentEmotion = emotions.find(emotion => emotion.name === currentMood);

  // 7. –í–æ–∑–≤—Ä–∞—â–∞–µ–º JSX - —Ä–∞–∑–º–µ—Ç–∫—É –Ω–∞—à–µ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.
  // JSX –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–∏—Å–∞—Ç—å HTML-–ø–æ–¥–æ–±–Ω—ã–π –∫–æ–¥ –≤–Ω—É—Ç—Ä–∏ JavaScript.
  return (
    <div className="App">
      <header className="App-header">
        <h1>–ú–æ–π –º–∏–Ω–∏-–¥–Ω–µ–≤–Ω–∏–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è</h1>
        <p>–í—ã–±–µ—Ä–∏ —Å–≤–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è:</p>

        {/* –ë–ª–æ–∫ —Å –∫–Ω–æ–ø–∫–∞–º–∏ –¥–ª—è –≤—ã–±–æ—Ä–∞ —ç–º–æ—Ü–∏–π */}
        <div className="mood-buttons">
          {/* –ü—Ä–æ—Ö–æ–¥–∏–º –ø–æ –º–∞—Å—Å–∏–≤—É emotions –∏ –¥–ª—è –∫–∞–∂–¥–æ–π —Å–æ–∑–¥–∞–µ–º –∫–Ω–æ–ø–∫—É */}
          {emotions.map((emotion) => (
            <button
              key={emotion.name} // –í–∞–∂–Ω–æ: –∫–∞–∂–¥—ã–π —ç–ª–µ–º–µ–Ω—Ç –≤ —Å–ø–∏—Å–∫–µ –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–π key
              className={`mood-button ${currentMood === emotion.name ? 'selected' : ''}`}
              // –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∫–Ω–æ–ø–∫—É –≤—ã–∑—ã–≤–∞–µ–º handleMoodClick –∏ –ø–µ—Ä–µ–¥–∞–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ —ç–º–æ—Ü–∏–∏
              onClick={() => handleMoodClick(emotion.name)}
            >
              {emotion.emoji} {/* –û—Ç–æ–±—Ä–∞–∂–∞–µ–º emoji –Ω–∞ –∫–Ω–æ–ø–∫–µ */}
            </button>
          ))}
        </div>

        {/* –ë–ª–æ–∫ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ */}
        <div className="result">
          {/* –ï—Å–ª–∏ —Ç–µ–∫—É—â–µ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –≤—ã–±—Ä–∞–Ω–æ (currentMood –Ω–µ –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞), –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ */}
          {currentMood && (
            <>
              <h2>–¢–≤–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è:</h2>
              <p className="selected-mood">
                {currentEmotion?.emoji} {/* –û—Ç–æ–±—Ä–∞–∂–∞–µ–º emoji –≤—ã–±—Ä–∞–Ω–Ω–æ–π —ç–º–æ—Ü–∏–∏ */}
              </p>
              <button onClick={handleResetClick} className="reset-button">
                –°–±—Ä–æ—Å–∏—Ç—å
              </button>
            </>
          )}
        </div>
      </header>
    </div>
  );
}

// –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, —á—Ç–æ–±—ã –µ–≥–æ –º–æ–∂–Ω–æ –±—ã–ª–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –¥—Ä—É–≥–∏—Ö —Ñ–∞–π–ª–∞—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ index.js)
export default MoodDiary;